<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>生徒判定サイト</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { color: #333; }
    .student { margin-bottom: 10px; padding: 5px; border-radius: 5px; background: #fff; display: flex; align-items: center; }
    .student button { margin-left: 5px; padding: 5px 10px; cursor: pointer; border: 1px solid #ccc; border-radius: 3px; }
    .student button.selected { background: #4caf50; color: #fff; }
    #submit-btn { margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; border: none; background: #2196f3; color: #fff; }
    #result { margin-top: 20px; white-space: pre-wrap; background: #eee; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>生徒判定サイト</h1>
  <div id="students-container"></div>
  <button id="submit-btn">送信</button>
  <div id="result"></div>

  <script>
    const studentsContainer = document.getElementById("students-container");
    const resultDiv = document.getElementById("result");
    const submitBtn = document.getElementById("submit-btn");

    // GitHub から JSON を取得（生徒名簿）
    fetch("https://raw.githubusercontent.com/ユーザー名/リポジトリ名/main/students.json")
      .then(res => res.json())
      .then(students => {
        // 生徒ごとにボタンを生成
        students.forEach((student, index) => {
          const div = document.createElement("div");
          div.className = "student";
          div.innerHTML = `
            <span>${student.name}</span>
            <button data-student="${index}" data-value="2">○</button>
            <button data-student="${index}" data-value="1">△</button>
            <button data-student="${index}" data-value="0">×</button>
          `;
          studentsContainer.appendChild(div);

          const buttons = div.querySelectorAll("button");
          buttons.forEach(btn => {
            btn.addEventListener("click", e => {
              buttons.forEach(b => b.classList.remove("selected"));
              e.target.classList.add("selected");
              students[index].score = parseInt(e.target.dataset.value);
            });
          });
        });

        // 送信ボタンで Dify LLM に送信
        submitBtn.addEventListener("click", () => {
          fetch("DIFY_LLM_ENDPOINT_URL", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": "Bearer YOUR_API_KEY"
            },
            body: JSON.stringify(students)
          })
          .then(res => res.json())
          .then(data => {
            resultDiv.textContent = "LLM 結果:\n" + JSON.stringify(data, null, 2);
          })
          .catch(err => {
            resultDiv.textContent = "エラー: " + err;
          });
        });
      })
      .catch(err => {
        studentsContainer.textContent = "JSON読み込みエラー: " + err;
      });
  </script>
</body>
</html>
